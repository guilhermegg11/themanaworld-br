// Capitão Mirc. Através dele você escolhe o destino de sua viagem.

navio-1.gat,24,23,0	script	Capitão Mirc	303,{

	set @max_viajantes, 20;
	if (Quest_Mirc == 0) goto _Inicia_Quest;
	if (Quest_Mirc == 1) goto _Durante_Quest;
	if (Quest_Mirc == 2 || QUEST_MASK1 & MASK1_RATOS) goto _Inicio;

_Inicia_Quest:
	mes "[Capitão Mirc]";
	mes "\"Eu já não sei o que aconteceu. Nem me recuperei ainda do um baque profundo e novamente sou posto à prova.\"";
	next;
	mes "\"Desta vez acho que foi a ingratidão que bateu a minha porta. Meu navio esta afundando e não há mais nada que eu possa fazer\"";
	next;
	menu
		"Perguntar o que aconteceu.", _resp1,
		"Não incomodar o capitão.", -;
	close;
 
_Durante_Quest:
	mes "[Capitão Mirc]";
	mes "\"Devo confessar que sua gentileza e bondade me fizeram ter esperança de que tudo vai dar certo. Por favor, dê um jeito naqueles animais imundos!\"";
	close;

_resp1:
	mes "*Você pergunta ao velho o que está acontecendo*";
	next;
	mes "[Capitão Mirc]";
	mes "\"Esta tudo acabado, ninguém mais vai poder viajar em meu navio, esses ratos nojentos arruinaram tudo! Eles estão comendo até mesmo a comida que trancamos no estoque!";
	next;
	mes "\"E veja quantos buracos no casco! Não há como viajar para lugar algum, será como se outras terras jamais tivessem existido.\"";
	next;
	menu
		"Ajudar o capitão com os ratos.", _ajudar, 
		"Deixar o velho falando.", _sair;
	close;
 
_ajudar:
	set Quest_Mirc, 1;
	mes "[" + strcharinfo(0) + "]";
	mes "Eu posso te ajudar a matar esses ratos. As coisas vão voltar para os eixos.";
	next;
	mes "[Capitão Mirc]";
	if(Sex==1) mes "Skavuska! Assim é que se diz! Tenho certeza que será um grande guerreiro.";
	if(Sex==0) mes "Skavuska! Assim é que se diz! Tenha cuidado minha jovem.";
	mes "\"Mas por favor, vá logo matar esses ratos antes que eles destruam tudo!\"";
	close;

_sair:
	mes "[Capitão do Navio]";
	mes "\"Eiii, vais me deixar aqui com esses ratos e não vai fazer nada?\"";
	next;
	mes "[" + strcharinfo(0) + "]";
	mes "Tenho coisas mais importantes a fazer do que ouvir lamentos de um velho";
	next;
	mes "[Capitão do Navio]";
	mes "\"Lembrai disso, pois quando a ingratidão vier bater na sua porta, também há de provar o gosto amargo do fel.\"";
	next;
	mes "\"Mas escolheste assim. Agora colha teus frutos. Vai .... e não olhe para trás. Suma daqui!\"";
	message strcharinfo(0), "*Você não pensou na dor que causaria ao comandante do navio. Parece que pensar não é teu forte...*";
	close;
	
_inicio:
	mes "[Capitão Mirc]";
	if(Sex==1) mes "\"Olá meu jovem! Deseja viajar para alguma cidade? Meu navio pode ser lento, mas para você a viagem é de graça... :D \"";
	if(Sex==0) mes "\"Olá minha jovem! Deseja viajar para alguma cidade? Meu navio pode ser lento, mas para você a viagem é de graça... :D \"";
	next;
	mes "["+ strcharinfo(0) +"]";
	menu
		"Sim, estava mesmo precisando economizar dinheiro!", -,
		"Estou sem tempo, prefiro algum meio mais rápido.", L_Fechar;

	mes "[Capitão Mirc]";
	mes "\"Excelente! Nada como relaxar durante uma calma viagem de navio, não acha? Mas me diga, para onde você pretende ir?\"";

L_Menu_Escolha:
	menu
		"Para o Polo Norte.", L_Polonorte,
		"Para a vila dos pescadores.", L_Fortaleza,
		"Para as Terras Desconhecidas.", L_Desconhecidas,
		"Desisti de viajar.", L_Fechar;


L_Polonorte:
	if (porto == 1) goto L_Ja_Polonorte;
	set @loop, 0;
	set @destino, 1;
	set @inicio, gettimetick(2);
	set @viajante$, strcharinfo(0);
	callsub S_REGISTRA;
	warp "navio.gat",32,27;
	close;

L_Fortaleza:
	if (porto == 2) goto L_Ja_Fortaleza;
	set @loop, 0;
	set @destino, 2;
	set @inicio, gettimetick(2);
	set @viajante$, strcharinfo(0);
	callsub S_REGISTRA;
	warp "navio.gat",32,27;
	close;

L_Desconhecidas:
	if (porto == 3) goto L_Ja_Desconhecidas;
	set @loop, 0;
	set @destino, 3;
	set @inicio, gettimetick(2);
	set @viajante$, strcharinfo(0);
	callsub S_REGISTRA;
	warp "navio.gat",32,27;
	close;

L_Ja_Polonorte:
	mes "[Capitão Mirc]";
	mes "\"Hahaha, mas você já está no Polo Norte! Escolha um outro destino.\"";
	goto L_Menu_Escolha;

L_Ja_Fortaleza:
	mes "[Capitão Mirc]";
	mes "\"Hahaha, mas você já está na Vila dos pescadores! Escolha um outro destino.\"";
	goto L_Menu_Escolha;

L_Ja_Desconhecidas:
	mes "[Capitão Mirc]";
	mes "\"Hahaha, mas você já está nas terras desconhecidas! Escolha um outro destino.\"";
	goto L_Menu_Escolha;

S_REGISTRA:
	set @loop, @loop + 1;
	if ($@VIAJANTES$[@loop] == "") goto L_Registro_OK;
	if (@loop > @max_viajantes) goto L_Navio_Cheio;

L_Registro_OK:
	set $@VIAJANTES$[@loop], @viajante$;
	return;

L_Navio_Cheio:
	mes "[Capitão Mirc]";
	mes "\"ohh... Eu peço sinceras desculpas, mas o navio já está lotado.... Volte daqui a um tempo, talvez surja uma vaga para você.\"";
	set @loop, 0;
	set @destino, 0;
	set @inicio, 0;
	set @viajante$, "";
	close;

L_Fechar:
	close;

}
