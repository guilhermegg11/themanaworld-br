// NPC que controla quem matou os totems

002.gat,107,115,0	script	#Controle	45,{

	end;

L_Iniciar:
	monster "002.gat", 93, 105, "", 1014, 1, "#Controle::OnTotem1Death";
	monster "002.gat", 93, 100, "", 1014, 1, "#Controle::OnTotem2Death";
	monster "002.gat", 93, 95, "", 1014, 1, "#Controle::OnTotem3Death";
	monster "002.gat", 93, 90, "", 1014, 1, "#Controle::OnTotem4Death";
	monster "002.gat", 93, 85, "", 1014, 1, "#Controle::OnTotem5Death";
	monster "002.gat", 105, 105, "", 1014, 1, "#Controle::OnTotem6Death";
	monster "002.gat", 105, 100, "", 1014, 1, "#Controle::OnTotem7Death";
	monster "002.gat", 105, 95, "", 1014, 1, "#Controle::OnTotem8Death";
	monster "002.gat", 105, 90, "", 1014, 1, "#Controle::OnTotem9Death";
	monster "002.gat", 105, 85, "", 1014, 1, "#Controle::OnTotem10Death";
	set $@EVENTO_STATUS, 1;
	end;

OnTimer5000:
	setnpctimer 0;
//
//	Modo Normal
//
//	if (gettime(4) != 6 || gettime(3) < 18) end;
//	if (gettime(3) > 20 && $@EVENTO_STATUS == 1) goto L_Limpar;
//	if (gettime(3) == 18 || (gettime(3) == 19 && gettime(2) == 0)) goto L_Anuncios;
//
//	Modo debug
	if ($@EVENTO_STATUS == 0) goto L_Iniciar;
	end;

OnTotem1Death:
	if ($@Totem1dono$ != getpartyname(getcharid(1))) announce "O totem 1 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem1dono$ != getpartyname(getcharid(1))) set $@Totem1dono$, getpartyname(getcharid(1));
	monster "002.gat", 93, 105, "", 1014, 1, "#Controle::OnTotem1Death";
	end;

OnTotem2Death:
	if ($@Totem2dono$ != getpartyname(getcharid(1))) announce "O totem 2 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem2dono$ != getpartyname(getcharid(1))) set $@Totem2dono$, getpartyname(getcharid(1));
	monster "002.gat", 93, 100, "", 1014, 1, "#Controle::OnTotem2Death";
	end;

OnTotem3Death:
	if ($@Totem3dono$ != getpartyname(getcharid(1))) announce "O totem 3 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem3dono$ != getpartyname(getcharid(1))) set $@Totem3dono$, getpartyname(getcharid(1));
	monster "002.gat", 93, 95, "", 1014, 1, "#Controle::OnTotem3Death";
	end;

OnTotem4Death:
	if ($@Totem4dono$ != getpartyname(getcharid(1))) announce "O totem 4 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem4dono$ != getpartyname(getcharid(1))) set $@Totem4dono$, getpartyname(getcharid(1));
	monster "002.gat", 93, 90, "", 1014, 1, "#Controle::OnTotem4Death";
	end;

OnTotem5Death:
	if ($@Totem5dono$ != getpartyname(getcharid(1))) announce "O totem 5 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem5dono$ != getpartyname(getcharid(1))) set $@Totem5dono$, getpartyname(getcharid(1));
	monster "002.gat", 93, 85, "", 1014, 1, "#Controle::OnTotem5Death";
	end;

OnTotem6Death:
	if ($@Totem6dono$ != getpartyname(getcharid(1))) announce "O totem 6 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem6dono$ != getpartyname(getcharid(1))) set $@Totem6dono$, getpartyname(getcharid(1));
	monster "002.gat", 105, 105, "", 1014, 1, "#Controle::OnTotem6Death";
	end;

OnTotem7Death:
	if ($@Totem7dono$ != getpartyname(getcharid(1))) announce "O totem 7 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem7dono$ != getpartyname(getcharid(1))) set $@Totem7dono$, getpartyname(getcharid(1));
	monster "002.gat", 105, 100, "", 1014, 1, "#Controle::OnTotem7Death";
	end;

OnTotem8Death:
	if ($@Totem8dono$ != getpartyname(getcharid(1))) announce "O totem 8 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem8dono$ != getpartyname(getcharid(1))) set $@Totem8dono$, getpartyname(getcharid(1));
	monster "002.gat", 105, 95, "", 1014, 1, "#Controle::OnTotem8Death";
	end;

OnTotem9Death:
	if ($@Totem9dono$ != getpartyname(getcharid(1))) announce "O totem 9 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem9dono$ != getpartyname(getcharid(1))) set $@Totem9dono$, getpartyname(getcharid(1));
	monster "002.gat", 105, 90, "", 1014, 1, "#Controle::OnTotem9Death";
	end;

OnTotem10Death:
	if ($@Totem10dono$ != getpartyname(getcharid(1))) announce "O totem 10 foi derrubado pela família " + getpartyname(getcharid(1)), 0;
	if ($@Totem10dono$ != getpartyname(getcharid(1))) set $@Totem10dono$, getpartyname(getcharid(1));
	monster "002.gat", 105, 85, "", 1014, 1, "#Controle::OnTotem10Death";
	end;

L_Anuncios:
	if (gettime(2) == 35 && $@Anuncios == 0) goto L_Anuncio1;
	if (gettime(2) == 40 && $@Anuncios == 1) goto L_Anuncio2;
	if (gettime(2) == 45 && $@Anuncios == 2) goto L_Anuncio3;
	if (gettime(2) == 50 && $@Anuncios == 3) goto L_Anuncio4;
	if (gettime(2) == 55 && $@Anuncios == 4) goto L_Anuncio5;
	if (gettime(2) == 0 && $@Anuncios == 5) goto L_Anuncio6;


L_Anuncio1:
	announce "Os Pilares de Érnegon que sustentam o Mundo de Mana passaram a sofrer instabilidades por causa do alinhamento cósmico que envolvem as forças do universo, autoridades mágicas estimam que tal período durará cerca de um milênio.", 0;
	set $@Anuncios, 1;
	end;

L_Anuncio2:
	announce "Desde eras mitólogicas os Pilares de Érnegon deste mundo estavam invisíveis na região onde se encontra o Castelo Brhamir, para nos resguardar de toda sorte de males.", 0;
	set $@Anuncios, 2;
	end;

L_Anuncio3:
	announce "Por conta desse período de trevas que estamos atrevessando, os Pilares de Érnegon estão enfraquecidos e visíveis no Jardim do Castelo, sofrendo nesse exato momento ataques de criaturas do submundo. O destino do Mundo de Mana depende desses pilares.", 0;
	set $@Anuncios, 3;
	end;

L_Anuncio4:
	announce "Tradicionalmente os segredos desse mundo ficaram restrito às fadas do Reino de Lilith, segundo Ivanize reza a lenda que os Piláres de Érnegon devem ser distruídos por membros da mesma Família para serem estabilizados e renovados, mediante habilitação mágica.", 0;
	set $@Anuncios, 4;
	end;

L_Anuncio5:
	announce "Os Alquimistas do Mundo de Mana uniram poderes para dispertarem o Mestre do Magos, Danboudor. Somente ele poderá fazer a habilitação mágica das Famílias para renovarem os Pilares de Érnegon. Ele estará por pouco tempo no portão do Castelo.", 0;
	set $@Anuncios, 5;
	end;

L_Anuncio6:
	announce "A batalha pela sobrevivência e perpetuação dos seres vivos deste mundo é trágica e violenta... Apenas uma Família poderá garantir a vida no Mundo de Mana! Ao ataque cavaleiros e amazonas!!!", 0;
	set $@Anuncios, 0;
	goto L_Iniciar;

L_Limpar:
	set $@EVENTO_STATUS, 0;
	set $@GRUPOS_AUTOEVENTO$, "";
	set $@GRUPO1$, "";
	set $@GRUPO2$, "";
	set $@GRUPO3$, "";
	set $@GRUPO4$, "";
	set $@GRUPO5$, "";
	set $@GRUPO6$, "";
	set $@GRUPO7$, "";
	set $@GRUPO8$, "";
	set $@GRUPO9$, "";
	set $@GRUPO10$, "";
	end;

onInit:
	initnpctimer;
	end;

}
