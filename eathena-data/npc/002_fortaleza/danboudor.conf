// NPC Danboudor

005.gat,100,23,0	script	Danboudor	328,{

	set @maxgrupos, 10;
	if ($@EVENTO_STATUS == 1) goto L_Debug2;

L_Debug:
	mes "[DEBUG]";
	mes "\"O evento está desabilitado. Gostaria de habilitá-lo?\"";
	next;
	menu
		"Sim", -,
		"Não", L_Fechar;

	set $@EVENTO_DEBUG, 1;
	mes "[DEBUG]";
	mes "\"Aguarde 5 segundos e converse comigo novamente;\"";
	close;

L_Debug2:
	mes "[DEBUG]";
	mes "\"O evento está habilitado. Gostaria de desabilitá-lo ou prosseguir normalmente?\"";
	next;
	menu
		"Desabilitar", -,
		"Prosseguir", L_Evento;

	set $@EVENTO_DEBUG, 0;
	mes "[DEBUG]";
	mes "\"Aguarde 5 segundos e converse comigo novamente;\"";
	close;

L_Evento:
//	if (@faloucomdanboudor == 1) goto L_Entrada;

	mes "[" + strcharinfo(0) + "]";
	menu
		"Poderoso Danboudor, o que devo fazer?", -;

	mes "[Danboudor]";
	mes "\"Meu filho, você e sua Família (clã) devem atacar e dominar o maior número de Pilares de Érnegon.\"";
	next;

	mes "[" + strcharinfo(0) + "]";
	menu
		"Como fazemos isso Mestre dos Mestres?", -;

	mes "[Danboudor]";
	mes "\" Vocês devem atacar os Pilares de Érnegon até que seu HP acabe e torne-se depois propriedade de sua família.\"";
	next;
	mes "\"Quando o Pilar passar a ser da sua família, você deve protegê-lo para que não seja atacado por membros de outras famílias.\"";
	next;

	mes "[" + strcharinfo(0) + "]";
	menu
		"Hum... Compreendi. E depois?", -;

	mes "[Danboudor]";
	mes "\"Vocês devem preservar o maior número de pilares possível até que a batalha seja completada. Você vai batalhar?\"";
	next;

	mes "[" + strcharinfo(0) + "]";
	menu
		"Com certeza, defenderei a minha terra com meus amigos.", -,
		"Mostrar Grupos e Integrantes - Opção de DEBUG", L_Mostrar,
		"Tenho medo, parece muito arriscado.", L_Fechar;

	if (getcharid(1) == 0) goto L_Sem_Grupo;
	mes "[Danboudor]";
	mes "\"Irei enfeitiça-lo e depois teletransportá-lo. Alohomora! Carpe Retractum!!!\"";
	next;
	set @seugrupo, getcharid(1);
	set @loop, 0;
	callsub S_PROCURA_GRUPO;
	set @loop, 0;
	callsub S_REGISTRA_GRUPO;
	set @loop, 0;
	callsub S_APRESENTA_GRUPOS;
	set @loop, 0;
	set @grupoexistente, 0;
	set @faloucomdanboudor, 1;
	goto L_Entrada;
	close;
	
L_Fechar:
	close;

L_Sem_Grupo:
	mes "Sem grupo";
	close;

L_Mostrar:
	set @integram1, getarraysize($@GRUPO1$) - 1;
	set @integram2, getarraysize($@GRUPO2$) - 1;
	set @integram3, getarraysize($@GRUPO3$) - 1;
	set @integram4, getarraysize($@GRUPO4$) - 1;
	set @integram5, getarraysize($@GRUPO5$) - 1;
	set @integram6, getarraysize($@GRUPO6$) - 1;
	set @integram7, getarraysize($@GRUPO7$) - 1;
	set @integram8, getarraysize($@GRUPO8$) - 1;
	set @integram9, getarraysize($@GRUPO9$) - 1;
	set @integram10, getarraysize($@GRUPO10$) - 1;
	set @loop, 0;
	callsub S_MOSTRAR1;
	set @loop, 0;
	if (@integram1 != 0) next;
	callsub S_MOSTRAR2;
	set @loop, 0;
	if (@integram2 != 0) next;
	callsub S_MOSTRAR3;
	set @loop, 0;
	if (@integram3 != 0) next;
	callsub S_MOSTRAR4;
	set @loop, 0;
	if (@integram4 != 0) next;
	callsub S_MOSTRAR5;
	set @loop, 0;
	if (@integram5 != 0) next;
	callsub S_MOSTRAR6;
	set @loop, 0;
	if (@integram6 != 0) next;
	callsub S_MOSTRAR7;
	set @loop, 0;
	if (@integram7 != 0) next;
	callsub S_MOSTRAR8;
	set @loop, 0;
	if (@integram8 != 0) next;
	callsub S_MOSTRAR9;
	set @loop, 0;
	if (@integram9 != 0) next;
	callsub S_MOSTRAR10;
	close;

S_MOSTRAR1:
	if (@loop == 0) mes "Grupo 1: " + $@GRUPOS_AUTOEVENTO$[1];
	if (@integram1 == 0 || $@GRUPOS_AUTOEVENTO$[1] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram1) return;
	mes $@GRUPO1$[@loop];
	goto S_MOSTRAR1;

S_MOSTRAR2:
	if (@loop == 0) mes "Grupo 2: " + $@GRUPOS_AUTOEVENTO$[2];
	if (@integram2 == 0 || $@GRUPOS_AUTOEVENTO$[2] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram2) return;
	mes $@GRUPO2$[@loop];
	goto S_MOSTRAR2;

S_MOSTRAR3:
	if (@loop == 0) mes "Grupo 3: " + $@GRUPOS_AUTOEVENTO$[3];
	if (@integram3 == 0 || $@GRUPOS_AUTOEVENTO$[3] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram3) return;
	mes $@GRUPO3$[@loop];
	goto S_MOSTRAR3;

S_MOSTRAR4:
	if (@loop == 0) mes "Grupo 4: " + $@GRUPOS_AUTOEVENTO$[4];
	if (@integram4 == 0 || $@GRUPOS_AUTOEVENTO$[4] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram4) return;
	mes $@GRUPO4$[@loop];
	goto S_MOSTRAR4;

S_MOSTRAR5:
	if (@loop == 0) mes "Grupo 5: " + $@GRUPOS_AUTOEVENTO$[5];
	if (@integram5 == 0 || $@GRUPOS_AUTOEVENTO$[5] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram5) return;
	mes $@GRUPO5$[@loop];
	goto S_MOSTRAR5;

S_MOSTRAR6:
	if (@loop == 0) mes "Grupo 6: " + $@GRUPOS_AUTOEVENTO$[6];
	if (@integram6 == 0 || $@GRUPOS_AUTOEVENTO$[6] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram6) return;
	mes $@GRUPO6$[@loop];
	goto S_MOSTRAR6;

S_MOSTRAR7:
	if (@loop == 0) mes "Grupo 7: " + $@GRUPOS_AUTOEVENTO$[7];
	if (@integram7 == 0 || $@GRUPOS_AUTOEVENTO$[7] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram7) return;
	mes $@GRUPO7$[@loop];
	goto S_MOSTRAR7;

S_MOSTRAR8:
	if (@loop == 0) mes "Grupo 8: " + $@GRUPOS_AUTOEVENTO$[8];
	if (@integram8 == 0 || $@GRUPOS_AUTOEVENTO$[8] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram8) return;
	mes $@GRUPO8$[@loop];
	goto S_MOSTRAR8;

S_MOSTRAR9:
	if (@loop == 0) mes "Grupo 9: " + $@GRUPOS_AUTOEVENTO$[9];
	if (@integram9 == 0 || $@GRUPOS_AUTOEVENTO$[9] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram9) return;
	mes $@GRUPO9$[@loop];
	goto S_MOSTRAR9;

S_MOSTRAR10:
	if (@loop == 0) mes "Grupo 10: " + $@GRUPOS_AUTOEVENTO$[10];
	if (@integram10 == 0 || $@GRUPOS_AUTOEVENTO$[10] == "") mes "Vazio!";
	set @loop, @loop + 1;
	if (@loop > @integram10) return;
	mes $@GRUPO10$[@loop];
	goto S_MOSTRAR10;

L_Muitos_Grupos:
	set @loop, 0;
	mes "Muitos Grupos";
	return;

S_PROCURA_GRUPO:
	set @loop, @loop + 1;
	if ($@GRUPOS_AUTOEVENTO$[@loop] == getpartyname(@seugrupo)) message strcharinfo(0), "DEBUG: Você já possui um grupo cadastrado. Sem necessidade de cadastrar outro.";
	if ($@GRUPOS_AUTOEVENTO$[@loop] == getpartyname(@seugrupo)) set @grupoexistente, @loop;
	if (@loop > @maxgrupos) return;
	goto S_PROCURA_GRUPO;

S_REGISTRA_GRUPO:
	if (@grupoexistente != 0) return;
	set @loop, @loop + 1;
	if ($@GRUPOS_AUTOEVENTO$[@loop] == "") message strcharinfo(0), "DEBUG: Você não possui um grupo cadastrado. Você será cadastrado no grupo " + @loop;
	if ($@GRUPOS_AUTOEVENTO$[@loop] == "") set @grupoexistente, @loop;
	if ($@GRUPOS_AUTOEVENTO$[@loop] == "") set $@GRUPOS_AUTOEVENTO$[@loop], getpartyname(@seugrupo);
	if (@grupoexistente != 0) return;
	if (@loop > @maxgrupos) goto L_Muitos_Grupos;
	goto S_REGISTRA_GRUPO;

S_APRESENTA_GRUPOS:
	if (@grupoexistente == 1) goto GRUPO1;
	if (@grupoexistente == 2) goto GRUPO2;
	if (@grupoexistente == 3) goto GRUPO3;
	if (@grupoexistente == 4) goto GRUPO4;
	if (@grupoexistente == 5) goto GRUPO5;
	if (@grupoexistente == 6) goto GRUPO6;
	if (@grupoexistente == 7) goto GRUPO7;
	if (@grupoexistente == 8) goto GRUPO8;
	if (@grupoexistente == 9) goto GRUPO9;
	if (@grupoexistente == 10) goto GRUPO10;

GRUPO1:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 1";
	set @loop, @loop + 1;
	if ($@GRUPO1$[@loop] != "" && $@GRUPO1$[@loop] != strcharinfo(0)) goto GRUPO1;
	if ($@GRUPO1$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO1$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO1$[@loop] == "") set $@GRUPO1$[@loop], strcharinfo(0);
	if ($@GRUPO1$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO1$[@loop] == strcharinfo(0)) return;
	return;

GRUPO2:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 2";
	set @loop, @loop + 1;
	if ($@GRUPO2$[@loop] != "" && $@GRUPO2$[@loop] != strcharinfo(0)) goto GRUPO2;
	if ($@GRUPO2$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO2$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO2$[@loop] == "") set $@GRUPO2$[@loop], strcharinfo(0);
	if ($@GRUPO2$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO2$[@loop] == strcharinfo(0)) return;
	return;

GRUPO3:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 3";
	set @loop, @loop + 1;
	if ($@GRUPO3$[@loop] != "" && $@GRUPO3$[@loop] != strcharinfo(0)) goto GRUPO3;
	if ($@GRUPO3$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO3$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO3$[@loop] == "") set $@GRUPO3$[@loop], strcharinfo(0);
	if ($@GRUPO3$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO3$[@loop] == strcharinfo(0)) return;
	return;
	
GRUPO4:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 4";
	set @loop, @loop + 1;
	if ($@GRUPO4$[@loop] != "" && $@GRUPO4$[@loop] != strcharinfo(0)) goto GRUPO4;
	if ($@GRUPO4$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO4$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO4$[@loop] == "") set $@GRUPO4$[@loop], strcharinfo(0);
	if ($@GRUPO4$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO4$[@loop] == strcharinfo(0)) return;
	return;
	
GRUPO5:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 5";
	set @loop, @loop + 1;
	if ($@GRUPO5$[@loop] != "" && $@GRUPO5$[@loop] != strcharinfo(0)) goto GRUPO5;
	if ($@GRUPO5$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO5$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO5$[@loop] == "") set $@GRUPO5$[@loop], strcharinfo(0);
	if ($@GRUPO5$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO5$[@loop] == strcharinfo(0)) return;
	return;
	
GRUPO6:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 6";
	set @loop, @loop + 1;
	if ($@GRUPO6$[@loop] != "" && $@GRUPO6$[@loop] != strcharinfo(0)) goto GRUPO6;
	if ($@GRUPO6$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO6$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO6$[@loop] == "") set $@GRUPO6$[@loop], strcharinfo(0);
	if ($@GRUPO6$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO6$[@loop] == strcharinfo(0)) return;
	return;

GRUPO7:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 7";
	set @loop, @loop + 1;
	if ($@GRUPO7$[@loop] != "" && $@GRUPO7$[@loop] != strcharinfo(0)) goto GRUPO7;
	if ($@GRUPO7$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO7$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO7$[@loop] == "") set $@GRUPO7$[@loop], strcharinfo(0);
	if ($@GRUPO7$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO7$[@loop] == strcharinfo(0)) return;
	return;

GRUPO8:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 8";
	set @loop, @loop + 1;
	if ($@GRUPO8$[@loop] != "" && $@GRUPO8$[@loop] != strcharinfo(0)) goto GRUPO8;
	if ($@GRUPO8$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO8$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO8$[@loop] == "") set $@GRUPO8$[@loop], strcharinfo(0);
	if ($@GRUPO8$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO8$[@loop] == strcharinfo(0)) return;
	return;

GRUPO9:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 9";
	set @loop, @loop + 1;
	if ($@GRUPO9$[@loop] != "" && $@GRUPO9$[@loop] != strcharinfo(0)) goto GRUPO9;
	if ($@GRUPO9$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO9$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO9$[@loop] == "") set $@GRUPO9$[@loop], strcharinfo(0);
	if ($@GRUPO9$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO9$[@loop] == strcharinfo(0)) return;
	return;

GRUPO10:
	if (@loop == 0) message strcharinfo(0), "DEBUG: Verificando se o seu nome consta entre os cadastrados do grupo 10";
	set @loop, @loop + 1;
	if ($@GRUPO10$[@loop] != "" && $@GRUPO10$[@loop] != strcharinfo(0)) goto GRUPO10;
	if ($@GRUPO10$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi encontrado. Isso significa que você já entrou no mapa pelo menos 1 vez.";
	if ($@GRUPO10$[@loop] == strcharinfo(0)) return;
	if ($@GRUPO10$[@loop] == "") set $@GRUPO10$[@loop], strcharinfo(0);
	if ($@GRUPO10$[@loop] == strcharinfo(0)) message strcharinfo(0), "DEBUG: Seu nome foi registrado. Isso significa que você está entrando no mapa pela 1 vez.";
	if ($@GRUPO10$[@loop] == strcharinfo(0)) return;
	return;

L_Entrada:
	warp "002.gat", 100, 118;
	close;


}
